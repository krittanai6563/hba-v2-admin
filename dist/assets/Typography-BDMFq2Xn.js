import{k as G,l as g,m as he,c as p,o as h,a as e,t as v,G as _,H as V,C as fe,e as z,P as J,w as c,b as i,N as w,O as ee,S as ve,u as A,f as te,T as pe,U as ge,W as be,X as _e,Y as ye,Z as xe,d as H,_ as Me,$ as Ve,M as W,a0 as Se,a1 as ae,a2 as Ne,a3 as Q,a4 as ke,V as R,x as Ce,a5 as Te}from"./index-DIUjx3mN.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as $e}from"./iconify-CU5e95WE.js";const Ie={class:"v-table v-theme--BLUE_THEME v-table--density-default month-table"},De={class:"v-table__wrapper"},Le={style:{"background-color":"#F5F5F5"}},Be=["colspan"],Ee={class:"month-item",style:{"background-color":"#fcf8ff"}},Fe={class:"text-p",style:{"font-size":"12px","font-weight":"600",color:"#725AF2"}},Ue={class:"month-item"},Pe={class:"text-p",style:{"font-size":"13px","font-weight":"400"}},qe={class:"month-item"},ze={class:"text-p",style:{"font-size":"13px","font-weight":"400"}},Oe={class:"month-item"},je={class:"text-p",style:{"font-size":"13px","font-weight":"400"}},Ae={class:"month-item"},He={class:"text-p",style:{"font-size":"13px","font-weight":"400"}},Ye={class:"text-p",style:{"font-size":"13px","font-weight":"400"}},Qe=G({__name:"MonthContractTable",props:{monthName:{},quarter:{}},setup(Y){const b=Y,F=localStorage.getItem("user_id"),D=localStorage.getItem("user_role")||"user",L=["‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 2.50 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó","2.51 - 5 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó","5.01 - 10 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó","10.01 - 20 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó","20.01 ‡∏•‡πâ‡∏≤‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ"],S=["‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏õ‡∏£‡∏¥‡∏°‡∏ì‡∏ë‡∏•","‡∏†‡∏≤‡∏Ñ‡πÄ‡∏´‡∏ô‡∏∑‡∏≠","‡∏†‡∏≤‡∏Ñ‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏≠‡∏≠‡∏Å‡πÄ‡∏â‡∏µ‡∏¢‡∏á‡πÄ‡∏´‡∏ô‡∏∑‡∏≠","‡∏†‡∏≤‡∏Ñ‡∏Å‡∏•‡∏≤‡∏á","‡∏†‡∏≤‡∏Ñ‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏≠‡∏≠‡∏Å","‡∏†‡∏≤‡∏Ñ‡πÉ‡∏ï‡πâ","‡∏†‡∏≤‡∏Ñ‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏ï‡∏Å"],N=g({});function y(x){return["‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°","‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå","‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°","‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô","‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°","‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô","‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°","‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°","‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô","‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°","‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô","‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°"].findIndex(f=>x.includes(f))+1}function U(x){const d=x.match(/\d{4}/),f=d?parseInt(d[0]):null;return f||new Date().getFullYear()+543}function T(x,d,f){var k;const $=x.trim().toLowerCase(),m=d.trim().toLowerCase(),I=N.value??{};for(const B in I)if(B.trim().toLowerCase()===$){const E=I[B];for(const C in E)if(C.trim().toLowerCase()===m){const q=(k=E[C])==null?void 0:k[f];return q==null?"-":typeof q=="number"?q.toLocaleString():String(q)}}return"-"}return he(async()=>{const x=U(b.monthName),d=y(b.monthName),f={role:D,buddhist_year:x,month_number:d,quarter:b.quarter};F&&(f.user_id=F),console.log("üì§ Sending payload:",f);try{const m=await(await fetch("https://thhbaadmin.infinityfreeapp.com/backend/get_contract_data.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)})).json();if(console.log("üì¶ Contract Data from API:",m),m.error){console.error("‚õîÔ∏è",m.error);return}const I={};for(const k in m){const B=k.trim();I[B]={};for(const E in m[k])I[B][E.trim()]=m[k][E]}N.value=I}catch($){console.error("‚ùå Error fetching contract data:",$)}}),(x,d)=>(h(),p("div",Ie,[e("div",De,[e("table",null,[e("thead",Le,[e("tr",null,[d[0]||(d[0]=e("th",{class:"text-h6"},null,-1)),e("th",{class:"text-h6",colspan:S.length,style:{"text-align":"center","border-bottom":"2px solid #00A6D4"}}," ‡∏¢‡∏≠‡∏î‡πÄ‡∏ã‡πá‡∏ô‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô "+v(b.monthName)+" ‡πÑ‡∏ï‡∏£‡∏°‡∏≤‡∏™‡∏ó‡∏µ‡πà "+v(b.quarter),9,Be)]),e("tr",null,[d[1]||(d[1]=e("th",null,null,-1)),(h(),p(_,null,V(S,f=>e("th",{key:f,class:"text-p",style:{"font-size":"13px"}},v(f),1)),64))])]),e("tbody",null,[(h(),p(_,null,V(L,(f,$)=>(h(),p(_,{key:$},[e("tr",Ee,[e("td",null,[e("h6",Fe,v(f),1)]),(h(),p(_,null,V(S,m=>e("td",{key:m},d[2]||(d[2]=[e("h6",{class:"text-subtitle-1"},null,-1)]))),64))]),e("tr",Ue,[d[3]||(d[3]=e("td",null,[e("h6",{class:"text-p",style:{"font-size":"12px","font-weight":"400"}},"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏•‡∏±‡∏á")],-1)),(h(),p(_,null,V(S,m=>e("td",{key:m},[e("h6",Pe,v(T(m,f,"unit")),1)])),64))]),e("tr",qe,[d[4]||(d[4]=e("td",null,[e("h6",{class:"text-p",style:{"font-size":"12px","font-weight":"400"}},"‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏£‡∏ß‡∏°")],-1)),(h(),p(_,null,V(S,m=>e("td",{key:m},[e("h6",ze,v(T(m,f,"value")),1)])),64))]),e("tr",Oe,[d[5]||(d[5]=e("td",null,[e("h6",{class:"text-p",style:{"font-size":"12px","font-weight":"400"}},"‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏™‡∏≠‡∏¢")],-1)),(h(),p(_,null,V(S,m=>e("td",{key:m},[e("h6",je,v(T(m,f,"area")),1)])),64))]),e("tr",Ae,[d[6]||(d[6]=e("td",null,[e("h6",{class:"text-p",style:{"font-size":"12px","font-weight":"400"}},"‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ ‡∏ï‡∏£.‡∏°")],-1)),(h(),p(_,null,V(S,m=>e("td",{key:m},[e("h6",He,[e("h6",Ye,v(T(m,f,"price_per_sqm")),1)])])),64))])],64))),64))])])])]))}}),Re=le(Qe,[["__scopeId","data-v-d12a8488"]]),Je={class:"v-row"},We={class:"v-col-md-6 v-col-12"},Ge={class:"d-flex align-center"},Ke={class:"card-title mb-1"},Xe={class:"v-col-md-6 v-col-12 text-right"},Ze={class:"d-flex justify-end v-col-md-12 v-col-lg-12 v-col-12"},we={key:0,class:"text-h6 mb-2",style:{"font-weight":"500",color:"#1b84ff"}},et={class:"d-flex justify-space-between align-center w-100"},tt={class:"text-h6"},at={style:{color:"#f8285a"}},lt={style:{color:"#f8285a"}},st={class:"py-2"},nt={class:"py-2"},ot={class:"py-2"},rt={class:"py-2"},ut={class:"py-2"},it=G({__name:"UiParentCard",props:{monthName:{},quarter:{}},setup(Y){const b=g(0),F=localStorage.getItem("user_id"),D=localStorage.getItem("user_role")||"user",L=g(!1),S=g(0),N=new Date().getFullYear()+543,y=g(N),U=Array.from({length:7},(a,t)=>N-t),T=new Date,P=T.getMonth()+1,x=g([]),d=g(!0);fe(y,a=>{const t=a-543,s=T.getFullYear()===t,r=s?T.getMonth()+1:12;x.value=Array.from({length:r},(u,n)=>({label:`${new Date(t,n).toLocaleString("th-TH",{month:"long"})} ${a}`,quarter:Math.floor(n/3)+1,monthNumber:n+1,index:n})),d.value&&s&&setTimeout(()=>{se(a),d.value=!1},0)},{immediate:!0});const f=g([]),$=g([]),m=g([]),I=g([]),k={1:f,2:$,3:m,4:I},B=a=>{var t;return((t=k[a])==null?void 0:t.value)??[]},E=(a,t)=>{typeof t=="number"?k[a].value=[t]:Array.isArray(t)&&t.every(s=>typeof s=="number")?k[a].value=t:console.warn("Invalid panel value:",t)},C=g([{name:"‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏õ‡∏£‡∏¥‡∏°‡∏ì‡∏ë‡∏•",contractStatus:"has",rows:[{label:"‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 2.50 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"2.51 - 5 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"5.01 - 10 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"10.01 - 20 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"20.01 ‡∏•‡πâ‡∏≤‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ",unit:0,value:0,area:0,errorMessage:"",touched:!1}]},{name:"‡∏†‡∏≤‡∏Ñ‡πÄ‡∏´‡∏ô‡∏∑‡∏≠",contractStatus:"has",rows:[{label:"‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 2.50 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"2.51 - 5 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"5.01 - 10 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"10.01 - 20 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"20.01 ‡∏•‡πâ‡∏≤‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ",unit:0,value:0,area:0,errorMessage:"",touched:!1}]},{name:"‡∏†‡∏≤‡∏Ñ‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏≠‡∏≠‡∏Å‡πÄ‡∏â‡∏µ‡∏¢‡∏á‡πÄ‡∏´‡∏ô‡∏∑‡∏≠",contractStatus:"has",rows:[{label:"‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 2.50 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"2.51 - 5 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"5.01 - 10 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"10.01 - 20 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"20.01 ‡∏•‡πâ‡∏≤‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ",unit:0,value:0,area:0,errorMessage:"",touched:!1}]},{name:"‡∏†‡∏≤‡∏Ñ‡∏Å‡∏•‡∏≤‡∏á",contractStatus:"has",rows:[{label:"‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 2.50 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"2.51 - 5 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"5.01 - 10 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"10.01 - 20 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"20.01 ‡∏•‡πâ‡∏≤‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ",unit:0,value:0,area:0,errorMessage:"",touched:!1}]},{name:"‡∏†‡∏≤‡∏Ñ‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏≠‡∏≠‡∏Å",contractStatus:"has",rows:[{label:"‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 2.50 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"2.51 - 5 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"5.01 - 10 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"10.01 - 20 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"20.01 ‡∏•‡πâ‡∏≤‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ",unit:0,value:0,area:0,errorMessage:"",touched:!1}]},{name:"‡∏†‡∏≤‡∏Ñ‡πÉ‡∏ï‡πâ",contractStatus:"has",rows:[{label:"‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 2.50 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"2.51 - 5 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"5.01 - 10 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"10.01 - 20 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"20.01 ‡∏•‡πâ‡∏≤‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ",unit:0,value:0,area:0,errorMessage:"",touched:!1}]},{name:"‡∏†‡∏≤‡∏Ñ‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏ï‡∏Å",contractStatus:"has",rows:[{label:"‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 2.50 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"2.51 - 5 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"5.01 - 10 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"10.01 - 20 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó",unit:0,value:0,area:0,errorMessage:"",touched:!1},{label:"20.01 ‡∏•‡πâ‡∏≤‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ",unit:0,value:0,area:0,errorMessage:"",touched:!1}]}]);function q(a){const t=[];if(a.touched&&a.value!==void 0&&a.value!==null&&a.value!==0){let s=0,r=0;const u=a.unit;a.label.includes("‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 2.50 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó")?(s=1e6,r=u*25e5):a.label.includes("2.51 - 5 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó")?(s=2.51*1e6,r=u*5e6):a.label.includes("5.01 - 10 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó")?(s=5.01*1e6,r=u*1e7):a.label.includes("10.01 - 20 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó")?(s=10.01*1e6,r=u*2e7):a.label.includes("20.01 ‡∏•‡πâ‡∏≤‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ")&&(s=20.01*1e6,r=u*999999999),a.value<s&&t.push(`‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏£‡∏ß‡∏°‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ ${s.toLocaleString()} THB `),a.value>r&&t.push(`‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏£‡∏ß‡∏°‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Å‡∏¥‡∏ô ${r.toLocaleString()} THB `)}return a.touched&&a.unit>50&&t.push("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 50 ‡∏´‡∏•‡∏±‡∏á"),a.touched&&a.area!==null&&a.area!==void 0&&a.area!==0&&(a.area<1e4||a.area>5e4)&&t.push("‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏™‡∏≠‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 10,000 - 50,000 ‡∏ï‡∏£.‡∏°."),t}function se(a){if(a!==N)return;const t=Math.floor((P-1)/3)+1,r=x.value.filter(u=>u.quarter===t).findIndex(u=>u.monthNumber===P);r!==-1&&(k[t].value=[r])}function ne(a){const t=[];return a.touched&&a.unit>50&&t.push("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 50 ‡∏´‡∏•‡∏±‡∏á"),t}function oe(a){const t=[];return a.touched&&a.area!==null&&a.area!==void 0&&a.area!==0&&(a.area<1e4||a.area>5e4)&&t.push("‡πÇ‡∏õ‡∏£‡∏î‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á"),t}function re(){return C.value.every(a=>a.contractStatus==="none"||a.rows.some(t=>t.unit>0&&t.value>0&&t.area>0))}const O=g({label:"",quarter:0,monthNumber:0,index:0}),ue=a=>{O.value=a,S.value=0,L.value=!0,C.value.forEach(t=>{t.rows.forEach(s=>{s.touched=!1,s.errorMessage=""})}),ce(a)},ie=async()=>{const a=localStorage.getItem("user_id");console.log("user_id:",a);const t={user_id:a,buddhist_year:y.value,month_number:O.value.monthNumber,quarter:O.value.quarter,regions:C.value,is_edit:j.value,role:D};try{const r=await(await fetch("https://thhbaadmin.infinityfreeapp.com/backend/submit_contract.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();console.log("Backend response:",r),alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!"),L.value=!1,window.location.reload()}catch(s){alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏Ç‡∏ì‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"),console.error(s)}},j=g(!1),ce=async a=>{const t={user_id:Number(F),buddhist_year:y.value,month_number:a.monthNumber,quarter:a.quarter};try{const r=await(await fetch("http://localhost/package/backend/get_contract.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();if(r.found){j.value=!0;const u=r.details;C.value.forEach(n=>{const M=u[n.name];M&&(n.contractStatus=M.contractStatus||"has",n.rows.forEach(l=>{const o=M[l.label];o?(l.unit=o.unit,l.value=o.value,l.area=o.area,de.value=o.value.toLocaleString()):(l.unit=0,l.value=0,l.area=0)}))})}else j.value=!1,C.value.forEach(u=>{u.contractStatus="has",u.rows.forEach(n=>{n.unit=0,n.value=0,n.area=0})})}catch(s){console.error("Error loading data:",s)}},de=g("");function K(a,t,s){let r=a.target.value.replace(/,/g,"");const u=parseFloat(r);isNaN(u)?t[s]=0:t[s]=u}function X(a,t,s){let r=a.target.value.replace(/,/g,"");const u=parseFloat(r);isNaN(u)||(t[s]=u,a.target.value=u.toLocaleString())}function Z(a){a.target.value=a.target.value.replace(/,/g,"")}return(a,t)=>(h(),z(J,null,{default:c(()=>[i(w,{elevation:"10"},{default:c(()=>[i(ee,null,{default:c(()=>[e("div",Je,[e("div",We,[e("div",Ge,[e("div",null,[e("h3",Ke,"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏≠‡∏î‡πÄ‡∏ã‡πá‡∏ô‡∏™‡∏±‡∏ç‡∏ç‡∏≤ ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏õ‡∏µ "+v(y.value),1),t[6]||(t[6]=e("h5",{class:"card-subtitle",style:{"text-align":"left"}},"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô",-1))])])]),e("div",Xe,[e("div",Ze,[i(ve,{modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=s=>y.value=s),label:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏µ",items:A(U),class:"mr-4"},null,8,["modelValue","items"])])])]),t[11]||(t[11]=e("div",{class:"v-col-md-12"},null,-1)),(h(),p(_,null,V([1,2,3,4],s=>e("div",{key:s,class:"mb-6"},[y.value<N||s<=Math.ceil(P/3)?(h(),p("h3",we," ‡∏¢‡∏≠‡∏î‡πÄ‡∏ã‡πá‡∏ô‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡πÑ‡∏ï‡∏£‡∏°‡∏≤‡∏™ "+v(s),1)):te("",!0),i(pe,{accordion:"","model-value":B(s)[0],"onUpdate:modelValue":r=>E(s,r)},{default:c(()=>[(h(!0),p(_,null,V(x.value.filter(r=>r.quarter===s),r=>(h(),z(ge,{key:r.index,"hide-actions":r.monthNumber===P&&y.value===N},{default:c(()=>[i(be,null,{default:c(()=>[e("div",et,[e("span",null,"‡∏¢‡∏≠‡∏î‡πÄ‡∏ã‡πá‡∏ô‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô "+v(r.label),1),r.monthNumber===P&&y.value===N&&A(D)!=="admin"&&A(D)!=="master"?(h(),z(_e,{key:0,modelValue:L.value,"onUpdate:modelValue":t[5]||(t[5]=u=>L.value=u),width:"80%"},{activator:c(({props:u})=>[i(R,Ce({ref_for:!0},u,{color:"primary",text:"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏≠‡∏î‡πÄ‡∏ã‡πá‡∏ô‡∏™‡∏±‡∏ç‡∏ç‡∏≤",variant:"flat",size:"small",onClick:n=>ue(r)}),null,16,["onClick"])]),default:c(({isActive:u})=>[i(w,null,{title:c(()=>{var n,M;return[e("div",tt,[t[7]||(t[7]=H(" ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏≠‡∏î‡πÄ‡∏ã‡πá‡∏ô‡∏™‡∏±‡∏ç‡∏ç‡∏≤ - ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ")),e("strong",at,v(((n=O.value)==null?void 0:n.label)||"-"),1),t[8]||(t[8]=H(" | ‡πÑ‡∏ï‡∏£‡∏°‡∏≤‡∏™ ")),e("strong",lt,v(((M=O.value)==null?void 0:M.quarter)||"-"),1)])]}),append:c(()=>[i(R,{icon:"mdi-close",variant:"text",color:"grey-darken-1",onClick:n=>u.value=!1},null,8,["onClick"])]),default:c(()=>[i(ee,null,{default:c(()=>[i(ye,{modelValue:b.value,"onUpdate:modelValue":t[1]||(t[1]=n=>b.value=n),"fixed-tabs":"",color:"primary",class:"mt-5 d-flex ga-3",height:"100"},{default:c(()=>[(h(!0),p(_,null,V(C.value,(n,M)=>(h(),z(xe,{key:M,value:M},{default:c(()=>[i(A($e),{icon:"solar:user-circle-outline",height:"25"}),H(v(n.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),i(Me,{modelValue:b.value,"onUpdate:modelValue":t[4]||(t[4]=n=>b.value=n),class:"mt-12"},{default:c(()=>[(h(!0),p(_,null,V(C.value,(n,M)=>(h(),z(Ve,{key:n.name,value:M},{default:c(()=>[i(J,null,{default:c(()=>[i(W,{cols:"12"},{default:c(()=>[i(Se,{modelValue:n.contractStatus,"onUpdate:modelValue":l=>n.contractStatus=l,inline:"",color:"#1B84FF"},{default:c(()=>[i(ae,{label:"‡∏°‡∏µ‡∏¢‡∏≠‡∏î‡πÄ‡∏ã‡πá‡∏ô‡∏™‡∏±‡∏ç‡∏ç‡∏≤",value:"has"}),i(ae,{label:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏¢‡∏≠‡∏î‡πÄ‡∏ã‡πá‡∏ô‡∏™‡∏±‡∏ç‡∏ç‡∏≤",value:"none"})]),_:2},1032,["modelValue","onUpdate:modelValue"]),i(Ne,null,{default:c(()=>[t[10]||(t[10]=e("thead",{style:{"background-color":"#2cabe3",color:"#ffffff"}},[e("tr",null,[e("th",null,"‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó"),e("th",null,"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏•‡∏±‡∏á"),e("th",null,"‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏£‡∏ß‡∏°"),e("th",null,"‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏™‡∏≠‡∏¢"),e("th",null,"‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢")])],-1)),e("tbody",null,[(h(!0),p(_,null,V(n.rows,l=>(h(),p("tr",{key:l.label},[e("td",st,v(l.label),1),e("td",nt,[i(Q,{modelValue:l.unit,"onUpdate:modelValue":o=>l.unit=o,modelModifiers:{number:!0},type:"number",min:"0",max:"99",density:"compact","hide-details":"auto","persistent-hint":"","error-messages":ne(l),disabled:n.contractStatus==="none",onInput:()=>{l.value=0,l.area=0},onBlur:o=>l.touched=!0},null,8,["modelValue","onUpdate:modelValue","error-messages","disabled","onInput","onBlur"])]),e("td",ot,[i(Q,{modelValue:l.value,"onUpdate:modelValue":o=>l.value=o,value:l.value.toLocaleString(),type:"text",density:"compact","hide-details":"auto","persistent-hint":"","error-messages":q(l),disabled:n.contractStatus==="none"||l.unit===0,onInput:o=>K(o,l,"value"),onBlur:o=>X(o,l,"value"),onFocus:t[2]||(t[2]=o=>Z(o))},null,8,["modelValue","onUpdate:modelValue","value","error-messages","disabled","onInput","onBlur"])]),e("td",rt,[i(Q,{modelValue:l.area,"onUpdate:modelValue":o=>l.area=o,value:l.area?l.area.toLocaleString():"",type:"text",density:"compact","hide-details":"auto","persistent-hint":"",disabled:n.contractStatus==="none"||l.value===0,"error-messages":oe(l),onInput:o=>K(o,l,"area"),onBlur:o=>X(o,l,"area"),onFocus:t[3]||(t[3]=o=>Z(o))},null,8,["modelValue","onUpdate:modelValue","value","disabled","error-messages","onInput","onBlur"])]),e("td",ut,v(l.area>0&&l.value>0?(l.value/l.area).toFixed(2):"0.00"),1)]))),128)),e("tr",null,[t[9]||(t[9]=e("th",null,"‡∏£‡∏ß‡∏°",-1)),e("th",null,v(n.rows.reduce((l,o)=>l+o.unit,0).toLocaleString()),1),e("th",null,v(n.rows.reduce((l,o)=>l+o.value,0).toLocaleString()),1),e("th",null,v(n.rows.reduce((l,o)=>l+o.area,0).toLocaleString()),1),e("th",null,v(n.rows.reduce((l,o)=>{const me=o.value&&o.area?o.value/o.area:0;return l+me},0).toFixed(2)),1)])])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(ke,{class:"justify-end"},{default:c(()=>[i(R,{color:"primary",onClick:ie,disabled:!j.value&&!re()},{default:c(()=>[H(v(j.value?"‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•":"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"),1)]),_:1},8,["disabled"])]),_:1})]),_:2},1024)]),_:2},1032,["modelValue"])):te("",!0)])]),_:2},1024),i(Te,null,{default:c(()=>[i(Re,{monthName:r.label,quarter:r.quarter,regionsData:C.value},null,8,["monthName","quarter","regionsData"])]),_:2},1024)]),_:2},1032,["hide-actions"]))),128))]),_:2},1032,["model-value","onUpdate:modelValue"])])),64))]),_:1})]),_:1})]),_:1}))}}),ct=le(it,[["__scopeId","data-v-d0af9f3e"]]),ft=G({__name:"Typography",setup(Y){const b=new Date,F=b.getMonth()+1,D=b.getFullYear()+543,S=`${b.toLocaleString("th-TH",{month:"long"})} ${D}`,N=Math.floor((F-1)/3)+1;return(y,U)=>(h(),z(J,null,{default:c(()=>[i(W,{cols:"12",sm:"12",lg:"12"},{default:c(()=>U[0]||(U[0]=[e("div",{class:"mt-3 mb-6"},[e("div",{class:"d-flex justify-space-between"},[e("div",{class:"d-flex py-0 align-center"},[e("div",null,[e("h3",{class:"text-h5 card-title"},"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏≠‡∏î‡πÄ‡∏ã‡πá‡∏ô‡∏™‡∏±‡∏ç‡∏ç‡∏≤"),e("ul",{class:"v-breadcrumbs v-breadcrumbs--density-default text-subtitle-1 textSecondary pa-0 ml-n1"},[e("li",{class:"v-breadcrumbs-item",text:"Home"},[e("a",{class:"v-breadcrumbs-item--link",href:"#"},[e("p",null,"‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å")])]),e("li",{class:"v-breadcrumbs-divider"},[e("i",{class:"mdi-chevron-right mdi v-icon notranslate v-theme--BLUE_THEME","aria-hidden":"true",style:{"font-size":"15px",height:"15px",width:"15px"}})]),e("li",{class:"v-breadcrumbs-item",text:"Dashboard"},[e("a",{class:"v-breadcrumbs-item--link",href:"#"},[e("p",null,"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏≠‡∏î‡πÄ‡∏ã‡πá‡∏ô‡∏™‡∏±‡∏ç‡∏ç‡∏≤")])])])])]),e("div")])],-1)])),_:1}),i(W,{cols:"12",sm:"12",lg:"12"},{default:c(()=>[i(ct,{monthName:S,quarter:N})]),_:1})]),_:1}))}});export{ft as default};
