import{I as C}from"./iconify-CU5e95WE.js";import{e as f,f as y,u as v,o as i,w as a,b as t,g as z,d as b,c as w,t as k,h as B,i as A,n as M,j as J,r as $,a as r,k as I,l as h,m as D,p as N,q as E,s as T,v as P,V,x as j,y as G,z as U,A as F,B as H,C as q,D as K,E as W,F as Q,G as L,H as X,I as Y,J as Z,K as ee}from"./index-DIUjx3mN.js";import{d as p}from"./img-logo_0-DZHFey1b.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";function S(e){return[{header:"Home"},{title:"ภาพรวมยอดเซ็นสัญญา",icon:"home-add-linear",to:"/",external:!1},{title:"ข้อมูลยอดเซ็นสัญญา",icon:"clipboard-list-linear",to:"/ui/typography",external:!1},{title:"รายงานแบ่งตามไตรมาส",icon:"document-linear",to:"/ui/shadow",external:!1},{title:"รายงานแบ่งตามมูลค่า",icon:"wallet-money-linear",to:"/ui/house",external:!1},{title:"รายงานแบ่งตามภูมิภาค",icon:"wad-of-money-linear",to:"/ui/region",external:!1},...e==="admin"?[{title:"จัดการข้อมูลผู้ใช้งาน",icon:"user-plus-linear",to:"/ui/user",external:!1},{title:"สรุปรายงาน",icon:"notebook-line-duotone",to:"/ui/repost_admin",external:!1}]:[],...e==="master"?[{title:"ข้อมูลสมาชิก",icon:"shield-user-outline",to:"/ui/report_user",external:!1},{title:"สรุปรายงาน",icon:" ",to:"/ui/repost_admin",external:!1}]:[],{title:"คู่มือการกรอกข้อมูล",icon:"notebook-minimalistic-line-duotone",to:"https://materialpro-vue3-admin.vercel.app/dashboards/modern",external:!0}]}const ae={__name:"index",props:{item:Object},setup(e){return(n,l)=>null}},le={key:0},se={key:0,class:"ps-3"},ne={__name:"index",props:{item:Object,level:Number},setup(e){const n=localStorage.getItem("user_role");return(l,o)=>!e.item.disabled&&(v(n)==="admin"||!e.item.adminOnly)?(i(),f(J,{key:0,href:e.item.external?e.item.to:void 0,to:e.item.external?void 0:e.item.to,class:"mb-1",rounded:"pill",disabled:e.item.disabled,target:e.item.external===!0?"_blank":void 0},{prepend:a(()=>[t(v(C),{icon:"solar:"+e.item.icon,height:"19",width:"19",level:e.level,class:M("position-relative z-index-2 ")},null,8,["icon","level"])]),default:a(()=>[t(z,null,{default:a(()=>[b(k(e.item.title)+" ",1),e.item.children?(i(),w("span",le,[e.item.chip?(i(),w("span",se,[t(B,{color:"secondary",size:(e.item.chipIcon,"x-small"),variant:e.item.chipVariant,"prepend-icon":e.item.chipIcon},{default:a(()=>[b(k(e.item.chip),1)]),_:1},8,["size","variant","prepend-icon"])])):y("",!0)])):y("",!0)]),_:1}),e.item.subCaption?(i(),f(A,{key:0,class:"text-caption mt-n1 hide-menu"},{default:a(()=>[b(k(e.item.subCaption),1)]),_:1})):y("",!0)]),_:1},8,["href","to","disabled","target"])):y("",!0)}},oe={__name:"NavCollapse",props:{item:Object,level:Number},setup(e){return(n,l)=>" 1111 "}},ie="/assets/logo-Ch3Viy_m.svg",re=["src"],ce={__name:"Logo",setup(e){return(n,l)=>{const o=$("RouterLink");return i(),f(o,{to:"/",class:"lh-0"},{default:a(()=>[r("img",{src:v(ie),alt:"logo"},null,8,re)]),_:1})}}},ue=["src"],de={class:"pt-4 pb-4 px-5 text-center"},me=I({__name:"ProfileDD",setup(e){const n=U(),l=h(p);function o(){try{const d=sessionStorage.getItem("user")||localStorage.getItem("user");if(d){const c=JSON.parse(d);l.value=(c==null?void 0:c.profile_image)||p}else l.value=p}catch{l.value=p}}D(()=>{o(),window.addEventListener("storage",o)}),N(()=>{window.removeEventListener("storage",o)});const u=async()=>{await fetch("http://localhost/package/backend/logout.php",{method:"POST",headers:{"Content-Type":"application/json"}}),localStorage.removeItem("user_id"),sessionStorage.removeItem("user"),n.push({name:"Login"})};return(d,c)=>(i(),f(E,{"close-on-content-click":!1},{activator:a(({props:g})=>[t(V,j({class:"custom-hover-primary",rounded:"pill",variant:"text"},g,{icon:""}),{default:a(()=>[t(G,{size:"35"},{default:a(()=>[r("img",{src:l.value,height:"35",alt:"user"},null,8,ue)]),_:1})]),_:2},1040)]),default:a(()=>[t(T,{rounded:"md",width:"200",elevation:"10",class:"mt-2"},{default:a(()=>[t(P,{class:"py-0",lines:"one",density:"compact"}),r("div",de,[t(V,{onClick:u,color:"primary",variant:"outlined",block:""},{default:a(()=>c[0]||(c[0]=[b("Logout")])),_:1})])]),_:1})]),_:1}))}}),fe={class:"font-weight-medium text-15 text-surface"},pe=I({__name:"SidebarProfile",setup(e){const n=h("Guest"),l=()=>{try{const o=sessionStorage.getItem("user");if(o){const u=JSON.parse(o);u&&u.fullname?n.value=`${u.fullname} `:n.value="Guest"}}catch(o){console.error("Error parsing user data:",o),n.value="Guest"}};return D(()=>{l(),window.addEventListener("storage",l)}),N(()=>{window.removeEventListener("storage",l)}),(o,u)=>(i(),f(E,{"open-on-click":""},{activator:a(({props:d})=>[r("div",j({class:"d-flex justify-space-between align-center w-100 cursor-pointer"},d),[r("h5",fe,k(n.value),1)],16)]),_:1}))}}),_e=te(pe,[["__scopeId","data-v-c9a1f435"]]),ve={class:"d-flex align-center justify-space-between w-100"},he={class:"d-flex ga-lg-16 ga-3 align-center"},ge={class:"profile"},xe={class:"profile-img py-10 px-3 d-flex align-center"},be=["src"],we={class:"profile-name d-flex align-center px-3"},ye={class:"maxWidth"},ke=I({__name:"Main",setup(e){const n=h(null),l=h(p),o=h("Guest"),u=F([]),{mdAndDown:d}=H(),c=h(!d.value);function g(){try{const _=sessionStorage.getItem("user")||localStorage.getItem("user");if(_){const s=JSON.parse(_);if(n.value=s,o.value=(s==null?void 0:s.fullname)||"Guest",s!=null&&s.profile_image&&s.profile_image.trim()!==""){const x=decodeURIComponent(s.profile_image);/^https?:\/\//.test(x)?l.value=x:l.value="http://localhost/package/backend/"+x}else l.value=p;u.value=S((s==null?void 0:s.role)||"user")}else n.value=null,o.value="Guest",l.value=p,u.value=S("user")}catch(_){console.error(_),n.value=null,o.value="Guest",l.value=p,u.value=S("user")}}return D(()=>{g(),window.addEventListener("storage",g)}),N(()=>{window.removeEventListener("storage",g)}),q(d,_=>{c.value=!_}),(_,s)=>{const x=$("perfect-scrollbar"),O=$("RouterView");return i(),w(L,null,[t(K,{elevation:"0",height:"68",class:"top bg-primary px-6"},{default:a(()=>[r("div",ve,[r("div",he,[t(ce,{class:"d-sm-flex d-none"}),t(V,{class:"hidden-lg-and-up",onClick:s[0]||(s[0]=m=>c.value=!c.value),rounded:"pill",height:"40",width:"40"},{default:a(()=>[t(v(C),{icon:"solar:list-bold",height:"22"})]),_:1})]),r("div",null,[t(V,{class:"mr-2 bg-success",rounded:"pill",href:"#",target:"_blank"},{default:a(()=>[t(v(C),{icon:"solar:home-2-linear",height:"20",width:"20",class:"mr-2"}),s[2]||(s[2]=b(" กลับสู่หน้าหลัก "))]),_:1}),t(me)])])]),_:1}),t(W,null,{default:a(()=>[t(Q,{left:"",elevation:"0",class:"leftSidebar top-header",width:300,modelValue:c.value,"onUpdate:modelValue":s[1]||(s[1]=m=>c.value=m),temporary:v(d),permanent:!v(d),app:!0},{default:a(()=>[t(x,{class:"scrollnavbar"},{default:a(()=>[r("div",ge,[r("div",xe,[t(G,{size:"50"},{default:a(()=>[r("img",{src:l.value,width:"50",alt:"User Profile",style:{"object-fit":"contain","border-radius":"50%"}},null,8,be)]),_:1})]),r("div",we,[t(_e)])]),t(P,{class:"px-4 py-2"},{default:a(()=>[(i(!0),w(L,null,X(u.value,(m,R)=>(i(),w(L,{key:R},[m.header?(i(),f(ae,{item:m,key:m.title},null,8,["item"])):m.children?(i(),f(oe,{key:1,class:"leftPadding",item:m,level:0},null,8,["item"])):(i(),f(ne,{key:2,class:"leftPadding",item:m},null,8,["item"]))],64))),128))]),_:1})]),_:1})]),_:1},8,["modelValue","temporary","permanent"]),t(Y,{class:"page-wrapper"},{default:a(()=>[r("div",ye,[t(O)])]),_:1})]),_:1})],64)}}}),Ce=I({__name:"FullLayout",setup(e){return(n,l)=>(i(),f(Z,null,{default:a(()=>[t(ee,null,{default:a(()=>[t(ke)]),_:1})]),_:1}))}});export{Ce as default};
