import{_ as h}from"./DarkLogo-Cp4B5Chf.js";import{k as V,l as d,c as p,o as f,ac as k,b as s,P as x,w as a,M as n,ad as g,d as r,a3 as v,a as _,ak as C,r as I,f as S,V as N,t as L,z as R,I as T,N as B,al as O}from"./index-DIUjx3mN.js";import"./logo-dark-vFYSVGr0.js";const P={class:"d-flex flex-wrap align-center ml-n2"},U={class:"ml-sm-auto"},$={key:0,class:"error mt-2"},j=V({__name:"LoginForm",setup(y){const u=d(!0),i=d(""),m=d(""),o=d(""),w=R(),b=async()=>{o.value="";try{const e=await(await fetch("https://thhbaadmin.infinityfreeapp.com/backend/login.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i.value,password:m.value})})).text();console.log("RAW Response:",e);const t=JSON.parse(e);t.message==="Login successful"?(sessionStorage.setItem("user",JSON.stringify({...t.user,loginTime:Date.now()})),localStorage.setItem("user_id",t.user.id),localStorage.setItem("user_role",t.user.role),await new Promise(l=>setTimeout(l,300)),w.push({name:"Dashboard"})):t.message==="Invalid username"||t.message==="Invalid credentials"?o.value="ชื่อผู้ใช้หรือรหัสผ่านไม่ถูกต้อง กรุณาตรวจสอบอีกครั้ง":t.message==="Incorrect password"?o.value="รหัสผ่านไม่ถูกต้อง กรุณาตรวจสอบอีกครั้ง":t.message==="User not found"?o.value="ไม่พบชื่อผู้ใช้นี้ในระบบ":t.message==="Invalid request"?o.value="คำขอไม่ถูกต้อง กรุณาตรวจสอบข้อมูลที่กรอก":o.value="เข้าสู่ระบบไม่สำเร็จ: "+t.message}catch(c){console.error("Error logging in:",c),o.value="เกิดข้อผิดพลาดในการเชื่อมต่อเซิร์ฟเวอร์ กรุณาลองใหม่อีกครั้ง"}};return(c,e)=>{const t=I("RouterLink");return f(),p("form",{onSubmit:k(b,["prevent"]),autocomplete:"on"},[s(x,{class:"d-flex mb-3"},{default:a(()=>[s(n,{cols:"12"},{default:a(()=>[s(g,{class:"mb-1"},{default:a(()=>e[3]||(e[3]=[r("Email")])),_:1}),s(v,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=l=>i.value=l),id:"email",autocomplete:"username",required:"",variant:"outlined","hide-details":"",color:"primary",type:"email"},null,8,["modelValue"])]),_:1}),s(n,{cols:"12"},{default:a(()=>[s(g,{class:"mb-1"},{default:a(()=>e[4]||(e[4]=[r("Password")])),_:1}),s(v,{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=l=>m.value=l),id:"password",autocomplete:"current-password",variant:"outlined",type:"password","hide-details":"",color:"primary"},null,8,["modelValue"])]),_:1}),s(n,{cols:"12",class:"pt-0"},{default:a(()=>[_("div",P,[s(C,{modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=l=>u.value=l),color:"primary","hide-details":""},{label:a(()=>e[5]||(e[5]=[r("จำรหัสผ่านฉันไว้")])),_:1},8,["modelValue"]),_("div",U,[s(t,{to:"/",class:"text-primary text-decoration-none text-body-1 opacity-1 font-weight-medium"},{default:a(()=>e[6]||(e[6]=[r("ลืมรหัสผ่าน")])),_:1})])])]),_:1}),s(n,{cols:"12",class:"pt-0"},{default:a(()=>[s(N,{type:"submit",color:"primary",size:"large",block:"",flat:"",class:"w-100"},{default:a(()=>e[7]||(e[7]=[r("เข้าสู่ระบบ")])),_:1}),o.value?(f(),p("p",$,L(o.value),1)):S("",!0)]),_:1})]),_:1})],32)}}}),D={class:"authentication"},E={class:"d-flex justify-center py-4 mb-3"},z=V({__name:"Login",setup(y){return(u,i)=>(f(),p("div",D,[s(T,{fluid:"",class:"pa-3"},{default:a(()=>[s(x,{class:"h-screen d-flex justify-center align-center"},{default:a(()=>[s(n,{cols:"12",class:"d-flex align-center"},{default:a(()=>[s(B,{rounded:"md",elevation:"10",class:"px-sm-1 px-0 mx-auto","max-width":"450"},{default:a(()=>[s(O,{class:"pa-sm-8"},{default:a(()=>[_("div",E,[s(h)]),s(j)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}});export{z as default};
